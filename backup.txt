<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="CSS/main.css" />
    <link rel="stylesheet" href="CSS/page.css" />
    <link rel="stylesheet" href="CSS/slideshow.css" />
    <!-- JavaScript -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <script src="assets/secret.js"></script>
    <script src="JS/main.js"></script>
    <script src="JS/slideshow.js"></script>
  </head>
  <body>
    <div class="slanted"></div>

    <div class="ourGallery">
      <h1>Our Gallery</h1>
      <button class="btn btn-outline-info" name="sportData">sport</button>
      <button class="btn btn-outline-info" name="musicData">music</button>
      <button class="btn btn-outline-info" name="foodData">food</button>
    </div>

    <div class="slideshow-container" id="divEl">

      <a class="prev">&#10094;</a>
      <a class="next">&#10095;</a>

      <br />

      <div style="text-align: center">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </div>

    </div>
  </body>
</html>

<!-- <script
src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"
></script>
<script
src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
crossorigin="anonymous"
></script> -->







////////////////////// JS /////////////////////////////////////

(() => {
  let sportData, musicData, foodData, currentData;
  let currentGallery;

  fetchOnLoad();

  // document ready
  document.addEventListener("DOMContentLoaded", function (event) {
    const categories = document.getElementsByClassName("btn-outline-info");
    for (const category of categories) {
      let { innerHTML: subject, name: variable } = category;
      category.addEventListener("click", () =>
        getDataByCategory(subject, variable)
      );
    }
  });

  function fetchOnLoad() {
    fetch(`https://pixabay.com/api/?key=${key}&q=sport&image_type=photo`, {
      type: "GET",
    })
      .then((data) => data.json())
      .then((json) => (sportData = json.hits))
      .then(() => {
        currentData = sportData;
        setImagesInGallery(6);
      })
      .catch((err) => console.log(err.message));
  }

  function getDataByCategory(subject, variable) {
    if (!eval(variable)) {
      fetch(
        `https://pixabay.com/api/?key=${key}&q=${subject}&image_type=photo`,
        {
          type: "GET",
        }
      )
        .then((data) => data.json())
        .then((json) => json.hits)
        .then((result) => {
          eval(variable + "=" + JSON.stringify(result));
          currentData = result;
          setImagesInGallery(6);
        })
        .catch((err) => console.log(err.message));
    } else {
      currentData = eval(variable);
    }
  }

  function setImagesInGallery(num) {
    let data = [];
    for (let i = 0; i < num; i++) {
      data.push(currentData[i].webformatURL);
      $("#divEl").prepend(`
      <div class="mySlides fadeEffect">
      <div class="numbertext"></div>
      <img
        class="slide-image"
        src=""
      />
      <div class="text">Caption Text</div>
    </div>
      `);
    }
    let images = document.getElementsByClassName("slide-image");
    for (let a = 0; a < num; a++) {
      console.log(images[a]);
      images[a].src = data[a];
    }
  }
})();


/////////////////////////////////// OLD JS ///////////////////////////////////


(() => {
  let sportData, musicData, foodData, currentData;
  let currentGallery;

  fetchOnLoad();

  // document ready
  document.addEventListener("DOMContentLoaded", function (event) {
    const categories = document.getElementsByClassName("btn-outline-info");
    for (const category of categories) {
      let { innerHTML: subject, name: variable } = category;
      category.addEventListener("click", () =>
        getDataByCategory(subject, variable)
      );
    }
  });

  function fetchOnLoad() {
    fetch(`https://pixabay.com/api/?key=${key}&q=sport&image_type=photo`, {
      type: "GET",
    })
      .then((data) => data.json())
      .then((json) => (sportData = json.hits))
      .then(() => {
        currentData = sportData;
        setImagesInGallery();
      })
      .catch((err) => console.log(err.message));
  }

  function getDataByCategory(subject, variable) {
    if (!eval(variable)) {
      fetch(
        `https://pixabay.com/api/?key=${key}&q=${subject}&image_type=photo`,
        {
          type: "GET",
        }
      )
        .then((data) => data.json())
        .then((json) => json.hits)
        .then((result) => {
          eval(variable + "=" + JSON.stringify(result));
          currentData = result;
          setImagesInGallery();
        })
        .catch((err) => console.log(err.message));
    } else {
      currentData = eval(variable);
    }
  }

  function setImagesInGallery() {
    let data = [];
    for (let i = 0; i < 3; i++) {
      data.push(currentData[i].webformatURL);
    }
    let images = document.getElementsByClassName("slide-image");
    for (let i = 0; i < images.length; i++) {
      images[i].src = data[i];
    }
  }
})();



